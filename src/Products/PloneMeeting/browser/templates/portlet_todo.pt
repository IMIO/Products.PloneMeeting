<dl i18n:domain="PloneMeeting" class="portlet portletTodo"
    tal:define="showColors view/showColors;
                meetingFolder view/getPloneMeetingFolder;
                tool view/getPloneMeetingTool">

    <dt class="portletHeader" i18n:translate="To do">To do</dt>

    <tal:block repeat="topic view/getTopicsForPortletToDo">
       <tal:block define="brains python: view.getBrainsForPortletTodo(topic);
        topic_url python: meetingFolder.absolute_url() + '/plonemeeting_topic_view?search=%s' % topic.getId()">
         <dd class="portletSection">
         <strong><a href="#" style="display: inline;" tal:attributes="href topic_url" title="see_everything" i18n:attributes="title" i18n:translate="" tal:content="python: topic.Title() or topic.getId()">Topic title</a></strong>
        </dd>
        <dd class="portletCell" tal:condition="not: brains">
         <span class="discreet" i18n:translate="nothing_to_do">Nothing to do</span>
        </dd>
        <tal:loop repeat="brain brains">
        <dd class="portletCell" tal:condition="brains"
                                tal:define="oddrow repeat/brain/odd;
                                            lastRow python:repeat['topic'].last('meta_type') and repeat['brain'].last('meta_type');
                                            dummy python: oddrow and 'portletCell pmLink odd' or 'portletCell pmLink even';
                                            class python: lastRow and dummy + ' lastRow' or dummy;"
                                tal:attributes="class class">
           <acronym tal:attributes="title brain/Title">
            <tal:showTitle replace="structure python: tool.getColoredLink(brain.getObject(), showColors, maxLength=view.getTitleLength())"/>
           </acronym>
        </dd>
        </tal:loop>
       </tal:block>
    </tal:block>
</dl>
