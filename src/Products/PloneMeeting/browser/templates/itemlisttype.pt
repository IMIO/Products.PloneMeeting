<tal:defines define="selectableListType python: view.listListTypes().items();
                     currentListType context/getListType;">
    <span class="#"
          onclick="javascript:toggleMenu('item_listType')"
          tal:attributes="class python: selectableListType and ('item_%s Editable' % currentListType) or ('item_%s' % currentListType)"
          tal:content="python: context.displayValue(context.listCompleteness(), currentListType)">Completeness</span>
    <span class="discreet"> â€” <a href="item-completeness-history" class="link-overlay-pm" i18n:translate="" i18n:domain="plone">History</a></span>
    <div id="pm_menu_item_listType"
         name="pm_menu_item_listType"
         class="pmDropdown"
         tal:condition="selectableListType">
        <div style="clear: left;" tal:repeat="listType python: selectableListType">
            <tal:block tal:condition="python: listType[0] != currentListType">
                <img style="float: left; padding-right: 0.3em;"
                     src="blue_arrow.gif"
                     tal:attributes="src string:${view/portal_url}/blue_arrow.gif"/>
                <a href="#"
                   tal:attributes="href python: '%s/@@change-item-listtype?new_listtype_value=%s' % (context.absolute_url(),
                                                                                    listType[0]);
                                   class python: 'link-overlay-pm item_%s' % listType[0]"
                   tal:content="python: listType[1]">Completeness</a>
            </tal:block>
        </div>
        <div style="text-align: right;" onclick="javascript:toggleMenu('item_listType')">
            <img style="bottom: -13px; position: absolute; right: -13px; cursor: pointer;"
                 src="pb_close_small.png"
                 tal:attributes="src string:${view/portal_url}/pb_close_small.png"/>
        </div>
    </div>
</tal:defines>
