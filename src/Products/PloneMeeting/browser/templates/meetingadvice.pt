<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="PloneMeeting">
<body>

  <metal:title fill-slot="content-title">
   <h1 class="documentFirstHeading">
    <span tal:content="structure here/getPrettyLink">Advice pretty title</span>
   </h1>
  </metal:title>

  <metal:main fill-slot="content-core">
    <metal:content-core define-macro="content-core">
  
      <tal:comment replace="nothing">Force show of plone.belowcontenttitle viewlet while
      the advice is displayed in an overlay because every vielwets are hidden in overlays...</tal:comment>
      <tal:overlayViewlets condition="python: 'ajax_load' in context.REQUEST">
          <div id="viewlet-below-content-title">
              <div tal:replace="structure provider:plone.belowcontenttitle" />
          </div>
          <div id="viewlet-above-content-body">
              <div tal:replace="structure provider:plone.abovecontentbody" />
          </div>
      </tal:overlayViewlets>
      <div>
        <tal:back_to_item condition="python: not 'ajax_load' in context.REQUEST">
          <metal:backToItem use-macro='here/@@pm-macros/backToItem' />
        </tal:back_to_item>
        <table class="no-style-table" width="100%">
            <tal:loop repeat="widget view/widgets/values">
            <tr tal:condition="python: widget.mode != 'hidden'">
                <td class="table_widget_label"><label tal:content="widget/label">Label</label></td>
                <td class="table_widget_value">
                    <tal:adviceType condition="python: widget.name == 'form.widgets.advice_type'">
                        <img src="#"
                             tal:define="adviceStyle python: context.portal_plonemeeting.getMeetingConfig(context).getAdviceStyle()"
                             tal:attributes="src string:$portal_url/advice_${adviceStyle}_${context/advice_type}.png" />
                    </tal:adviceType>
                    <tal:render tal:content="structure widget/render">Value</tal:render>
                    <tal:previousAdviceType condition="python: widget.name == 'form.widgets.advice_type' and context.advice_type == 'asked_again'">
                      <metal:previousAdviceType use-macro="context/@@pm-macros/previousAdviceType" />
                    </tal:previousAdviceType>
                </td>
            </tr>
            </tal:loop>
        </table>
        <fieldset tal:define="tool python: context.portal_plonemeeting;
                              hasAnnexes python: tool.hasAnnexes(context, portal_type='annex');">
            <legend i18n:translate="existing_annexes">Annexes</legend>
            <table width="100%" class="no-style-table" cellpadding="0" cellspacing="0" style="margin: 0;">
                <tr tal:define="obj python: context">
                    <td tal:condition="hasAnnexes">
                        <tal:annexes replace="structure python: context.restrictedTraverse('categorized-childs')(portal_type='annex')" />
                    </td>
                    <td tal:condition="python: not hasAnnexes">
                        <span>-</span>
                    </td>
                    <td width="110px">
                     <a href="#" tal:attributes="href string:${context/absolute_url}/@@categorized-annexes">
                      <img class="categorized_elements_more_infos_icon"
                           src="more_infos.png"
                           tal:attributes="src string:${portal_url}/++resource++collective.iconifiedcategory/more_infos.png" />
                      <span i18n:domain="collective.iconifiedcategory" i18n:translate="">More infos</span>
                     </a>
                    </td>
                </tr>
            </table>
        </fieldset>

        <tal:close_button condition="python: 'ajax_load' in context.REQUEST">
          <div class="visualClear"></div>
          <metal:closeButton use-macro="here/@@pm-macros/closeButtonMacro" />
        </tal:close_button>

      </div>
  
    </metal:content-core>
  </metal:main>

</body>
</html>
